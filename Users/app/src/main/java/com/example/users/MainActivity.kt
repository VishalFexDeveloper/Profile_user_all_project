package com.example.usersimport android.content.Intentimport androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport android.view.Viewimport android.widget.Toastimport com.example.users.databinding.ActivityMainBindingimport com.google.firebase.auth.FirebaseAuthimport com.google.firebase.firestore.FirebaseFirestoreimport java.util.UUIDclass MainActivity : AppCompatActivity() {    private lateinit var binding: ActivityMainBinding    private val db = FirebaseFirestore.getInstance()    private val auth = FirebaseAuth.getInstance()    private val currentUser = auth.currentUser    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        binding = ActivityMainBinding.inflate(layoutInflater)        setContentView(binding.root)        binding.nextPageBtn.setOnClickListener {            startActivity(Intent(this,HomeActivity::class.java))            finish()        }        binding.saveBtn.setOnClickListener {            saveData()        }    }    private fun saveData() {        val userName = binding.userName.text.toString().trim()        val userNumber = binding.userNumber.text.toString().trim()        val userEmail = binding.userEmail.text.toString().trim()        val userCityName = binding.userCityName.text.toString().trim()        binding.progressBar.visibility = View.VISIBLE        if (userEmail.isBlank() || userName.isBlank() || userNumber.isBlank() || userCityName.isBlank()) {            Toast.makeText(this, "All fields are required", Toast.LENGTH_SHORT).show()            return        }        val id = generateRandomString(30)        val user = hashMapOf(            "name" to userName,            "number" to userNumber,            "email" to userEmail,            "city" to userCityName,            "id" to id        )        currentUser?.let { user["uid"] = it.uid }        db.collection("userList").document(id)            .set(user)            .addOnSuccessListener {                Toast.makeText(this, "User data saved successfully", Toast.LENGTH_SHORT).show()                clearFields()                binding.progressBar.visibility = View.GONE                startActivity(Intent(this,HomeActivity::class.java))                finish()                return@addOnSuccessListener            }            .addOnFailureListener { e ->                Toast.makeText(this, "Failed to save user data: ${e.message}", Toast.LENGTH_SHORT).show()                return@addOnFailureListener            }    }    private fun clearFields() {        binding.userName.text.clear()        binding.userNumber.text.clear()        binding.userEmail.text.clear()        binding.userCityName.text.clear()    }    private fun generateRandomString(length: Int): String {        val uuid = UUID.randomUUID()        return uuid.toString().substring(0, length)    }}